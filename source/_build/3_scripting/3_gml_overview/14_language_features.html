<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>Language Features</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">

<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">
<link rel="stylesheet" href="../../../../default.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/3_gml_overview/14_language_features.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F14_language_features.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2F_build%2F3_scripting%2F3_gml_overview%2F14_language_features.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! --><script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script><h2> Caractéristiques linguistiques </h2><div class="body-scroll"><p><br></p><p> Le langage <span class="notranslate">GameMaker</span> (GML) comporte un certain nombre de fonctionnalités qui font partie de la structure essentielle de tout code écrit avec le langage. Chacun de ces éléments sera utilisé dans n&#39;importe quel code que vous écrivez plusieurs fois. Vous devez donc savoir en quoi ils consistent et comment ils fonctionnent avant de commencer à programmer un projet. </p><blockquote> <label class="collapse" for="one"><span class=
"notranslate">if</span> / opérateur conditionnel</label> <input id=
"one" type="checkbox"><div class="index_list"> Un simple <tt>"if"</tt> déclaration prend cette forme: <br><br><p class="code">if (&lt;expression&gt;) &lt;statement&gt;<span class="notranslate"></span></p><br> ou il peut avoir le légèrement plus complexe <tt>"if... else..."</tt> forme: <br><br><p class="code">if (&lt;expression&gt;) &lt;statement&gt; else
&lt;statement&gt;<span class="notranslate"></span></p><br> Dans ce cas, l&#39;expression sera évaluée et si la valeur (arrondie) est &lt;= 0 ( <tt>false</tt> ) la déclaration après exécution est sinon, ( <tt>true</tt> ) l&#39;autre déclaration est exécutée. C&#39;est une bonne habitude de toujours mettre des accolades autour des instructions dans le &quot;si&quot;, et de prendre une nouvelle ligne dans le bloc pour chaque instruction, ainsi le code de fin aura cette forme: <br><br><p class="code">if (&lt;expression&gt;)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&lt;statement&gt;<br>
&nbsp;&nbsp;&nbsp;...<br>
&nbsp;&nbsp;&nbsp;&lt;statement&gt;<br>
&nbsp;&nbsp;&nbsp;}<br>
else<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&lt;statement&gt;<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> A titre d&#39;exemple, considérons le code suivant qui déplacera l&#39;instance vers la position x = 200 dans la pièce: <br><br><p class="code">if (x &lt; 200)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x += 4;<br>
&nbsp;&nbsp;&nbsp;}<br>
else<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x -= 4;<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> Notez que vous pouvez également effectuer <i>des</i> contrôles <i>composés</i> dans un if, c&#39;est-à-dire: vérifier différentes valeurs ou expressions dans la même instruction. Lorsque vous faites cela, <i><span class="notranslate">GameMaker Studio 2</span></i> évalue chacun d’eux à la fois, et si l’un d’entre eux est évalué à faux, le reste sera ignoré. Par exemple: <br><br><p class="code">if (keyboard_check_pressed(vk_enter) &amp;&amp;
!instance_exists(obj_Player))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;go = false<br>
&nbsp;&nbsp;&nbsp;alarm[0] = room_speed<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> Vous pouvez également effectuer des <b>opérations conditionnelles</b> (également <b>appelées</b> opérations <b>ternaires</b> ), qui constituent essentiellement un &quot;raccourci&quot; permettant d&#39;exécuter un &quot;if&quot; de base. Il a la syntaxe suivante: <br><br><p class="code">variable = condition ? &lt;expression1 (if
<i>true</i>)&gt; : &lt;expression2 (if <i>false</i>)&gt;<span class="notranslate"></span></p><br> L’opérateur conditionnel renverra l’une des deux valeurs données en fonction de l’évaluation de la condition. <tt>true</tt> ou <tt>false</tt>, par exemple: <br><br><p class="code">var temp_x = x &lt; (room_width / 2) ? 32:
room_width - 32;<span class="notranslate"></span></p><br> Le code ci-dessus vérifie la valeur de &quot;x&quot; par rapport à la valeur de la moitié de la largeur de la pièce. S&#39;il est inférieur, il définira &quot;temp_x&quot; sur 32, sinon &quot;temp_x&quot; sera room_width - 32. Voici quelques exemples supplémentaires de utilisation: <br><br><p class="code">draw_text(x, y, "The fee is " + (global.Member ?
"$2.00" : "$10.00"));<br>
path_start((global.level &gt; 10 ? path_hard : path_easy;), 2,
path_action_reverse, true);<br>
--hp &lt;= 0 ? instance_destroy() : score += 10;<span class="notranslate"></span></p><br> Il convient de noter que vous pouvez imbriquer des opérations conditionnelles, mais que si vous le faites, chaque opération devra être placée entre crochets, par exemple: <br><br><p class="code">var c = a ? "foo" : (b ? "bar" : "wii"); //
Correct<br>
var c = a ? "foo" : b ? "bar" : "wii";&nbsp;&nbsp; // Will cause an
error<span class="notranslate"></span></p></div><br> <label class="collapse" for="two"><span class=
"notranslate">repeat</span></label> <input id="two" type=
"checkbox"> <div class="index_list"> UNE <tt>"repeat"</tt> déclaration a la forme <br><br><p class="code">repeat (&lt;expression&gt;) &lt;statement&gt;<span class="notranslate"></span></p><br> L&#39;instruction est répétée le nombre de fois indiqué par la valeur arrondie de l&#39;expression. Par exemple, le programme suivant crée cinq balles à des positions aléatoires. <br><br><p class="code">{<br>
repeat (5) instance_create_layer(random(400), random(400),
"Instances", obj_ball);<br>
}<br><span class="notranslate"></span></p><p><br> Cela peut être très utile pour éviter de saisir plusieurs fois le même code, d&#39;utiliser des tableaux ou de compter plusieurs opérations, etc. Par exemple: <br><br></p><p class="code">{<br>
var i, total;<br>
i = 0;<br>
total = 0;<br>
repeat (10)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;total += array[i];<br>
&nbsp;&nbsp;&nbsp;i += 1<br>
&nbsp;&nbsp;&nbsp;}<br>
draw_text(32, 32, total);<br>
}<br><span class="notranslate"></span></p></div><br> <label class="collapse" for="three"><span class=
"notranslate">while</span></label> <input id="three" type=
"checkbox"> <div class="index_list"> UNE <tt>"while"</tt> déclaration a la forme <br><br><p class="code">while (&lt;expression&gt;) &lt;statement&gt;<span class="notranslate"></span></p><br> Tant que l&#39;expression est vraie, l&#39;instruction (qui peut également être un bloc de code) est exécutée. <b>Soyez prudent avec vos boucles while!</b> Vous pouvez facilement créer des boucles infinies, auquel cas votre jeu sera suspendu et ne réagira plus à aucune entrée de l&#39;utilisateur. Vous trouverez ci-dessous un exemple d&#39;utilisation typique de &quot;while&quot;: <br><br><p class="code">{<br>
while (!place_free(x, y))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x = random(room_width);<br>
&nbsp;&nbsp;&nbsp;y = random(room_height);<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Le programme ci-dessus essaie de placer l&#39;objet actuel dans une position libre (c&#39;est à peu près la même chose que l&#39;action de déplacer un objet dans une position aléatoire). </div><br> <label class="collapse" for="four"><span class="notranslate">do / until</span></label> <input id="four" type="checkbox"> <div class="index_list"> Un &quot;faire&quot; est vraiment le <tt>"do... until"</tt> déclaration comme vous ne pouvez pas avoir l&#39;un sans l&#39;autre. Il a cette forme: <br><br><p class="code">do &lt;statement&gt; until (&lt;expression&gt;)<span class="notranslate"></span></p><br> L&#39;instruction (qui peut également être un bloc de code) est exécutée jusqu&#39;à ce que l&#39;expression soit trouvée vraie et l&#39;instruction initiale est toujours exécutée au moins une fois. Soyez prudent avec vos boucles, car vous pouvez facilement les faire boucle pour toujours, auquel cas votre jeu sera suspendu et ne réagira plus à aucune entrée de l&#39;utilisateur. Vous trouverez ci-dessous un exemple d&#39;utilisation typique <tt>"do... until"</tt>: <br><br><p class="code">{<br>
do<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x = random(room_width);<br>
&nbsp;&nbsp;&nbsp;y = random(room_height);<br>
&nbsp;&nbsp;&nbsp;}<br>
until (place_free(x, y)); }<br><span class="notranslate"></span></p><br> Le programme ci-dessus essaie de placer l&#39;objet actuel dans une position libre (c&#39;est à peu près la même chose que l&#39;action de déplacer un objet dans une position aléatoire). </div><br> <label class="collapse" for="five"><span class=
"notranslate">for</span></label> <input id="five" type="checkbox"> <div class="index_list"> UNE <tt>"for"</tt> déclaration a cette forme: <br><br><p class="code">for (&lt;assigment1&gt; ; &lt;expression&gt;
;&lt;statement1&gt;) &lt;statement2&gt;<span class="notranslate"></span></p><br> Cela fonctionne comme suit - La première assigment1 est exécutée, puis l&#39;expression est évaluée et, si elle est vraie, l&#39;instruction2 est exécutée. Ensuite, l&#39;instruction1 est exécutée et l&#39;expression est à nouveau évaluée. Cette boucle continuera jusqu&#39;à ce que l&#39;expression soit fausse. <br><br> Cela peut sembler compliqué à l’écriture, mais vous devriez l’interpréter comme suit: <br><br><ul><li> La première instruction initialise la boucle for. </li><li> L&#39;expression teste si la boucle doit être terminée. </li><li> Statement2 est l&#39;instruction &quot;step&quot; qui passe à l&#39;évaluation de la boucle suivante. </li></ul> Ceci est extrêmement utile pour effectuer des tâches répétitives qui impliquent plusieurs lignes de code de toute autre manière, et est couramment utilisé comme compteur pour évaluer des tableaux ou dessiner des objets. L&#39;exemple de code suivant illustre une utilisation typique de ce type d&#39;instruction: <br><br><p class="code">{<br>
for (var i = 0; i &lt; 10; i += 1)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;draw_text(32, 32 + (i * 32), string(i) + ". "+
string(scr[i]));<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Le code ci-dessus initialise une boucle for, commençant à 0 et comptant jusqu&#39;à 9, puis utilise la valeur de boucle de <span class=
"notranslate">&quot;i&quot;</span> pour dessiner les valeurs stockées dans un tableau en bas de l&#39;écran. Notez comment le <tt>"for"</tt> La variable de boucle <span class=
"notranslate">&quot;i&quot;</span> sert non seulement à parcourir en boucle le tableau, mais également à tracer un nombre et à indiquer à <i><span class="notranslate">GameMaker Studio</span> 2</i> où tracer les valeurs dans la salle. Cette flexibilité est l’une des principales raisons pour lesquelles <tt>"for"</tt> les boucles sont si importantes dans la programmation. </div><br> <label class="collapse" for="six"><span class=
"notranslate">switch</span></label> <input id="six" type=
"checkbox"> <div class="index_list"> Dans un certain nombre de situations, vous souhaitez laisser vos instances effectuer une action en fonction d&#39;une valeur particulière. Vous pouvez le faire en utilisant un nombre de &quot; <tt>if</tt> &quot;mais lorsque les choix possibles dépassent deux ou trois, il est généralement plus facile d&#39;utiliser le <tt>"switch"</tt> déclaration. UNE <tt>switch</tt> déclaration a la forme suivante: <br><br><p class="code">switch (&lt;expression&gt;)<br>
{<br>
case &lt;expression1&gt;: &lt;statement1&gt;; ... ; break;<br>
case &lt;expression2&gt;: &lt;statement2&gt;; ... ; break;<br>
...<br>
default: &lt;statement&gt;;<br>
}<br><span class="notranslate"></span></p><br> Cela fonctionne comme suit: <br><br><ul><li> L&#39;expression est d&#39;abord exécutée. </li><li> Ensuite, il est comparé aux résultats des différentes expressions après chacune des déclarations de cas. </li><li> L&#39;exécution continue après la première instruction case avec la valeur correcte, <i>jusqu&#39;à ce qu&#39;une instruction break soit rencontrée</i>. </li><li> Si aucune instruction case n&#39;a la bonne valeur, l&#39;exécution est poursuivie après l&#39;instruction default (il n&#39;est pas nécessaire de disposer d&#39;une instruction default, auquel cas aucune action ne sera entreprise). </li></ul> Notez que plusieurs déclarations de cas peuvent être placées pour la même déclaration. De plus, l&#39;interruption n&#39;est pas requise et s&#39;il n&#39;y a pas d&#39;instruction d&#39;interruption, l&#39;exécution continue simplement avec le code de l&#39;instruction suivante. Cela signifie que vous pouvez créer un &quot;commutateur&quot; hiérarchique dans lequel différentes sections de code sont exécutées en fonction de la valeur saisie. voici un exemple typique <tt>"switch"</tt> à partir d&#39;un jeu: <br><br><p class="code">{<br>
switch (keyboard_key)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;case vk_left:<br>
&nbsp;&nbsp;&nbsp;case ord("A"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x -= 4;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
&nbsp;&nbsp;&nbsp;case vk_right:<br>
&nbsp;&nbsp;&nbsp;case ord("D"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x += 4;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
&nbsp;&nbsp;&nbsp;case vk_up:<br>
&nbsp;&nbsp;&nbsp;case ord("W"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y -= 4;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
&nbsp;&nbsp;&nbsp;case vk_down:<br>
&nbsp;&nbsp;&nbsp;case ord("S"):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y += 4;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Le code ci-dessus utilise <tt>"switch"</tt> pour rechercher un événement au clavier, puis le compare aux cas répertoriés. S&#39;il répond à l&#39;une des valeurs requises, le code correspondant est exécuté. Notez comment dans le code, nous avons utilisé la manière dont <tt>"switch"</tt> peut vérifier plusieurs cas et continuer si aucune interruption n&#39;est rencontrée pour permettre l&#39;utilisation de différentes clés afin d&#39;obtenir le même résultat. C’est l’un des moyens par lesquels vous pouvez autoriser plusieurs configurations pour le déplacement dans vos jeux. </div><br> <label class="collapse" for="seven"><span class=
"notranslate">break</span></label> <input id="seven" type=
"checkbox"> <div class="index_list"> le <tt>"break"</tt> déclaration est utilisée pour terminer prématurément une <tt>for</tt>, <tt>repeat</tt>, <tt>while</tt>, <tt>do... until</tt> boucle de quelque sorte, ou de dire un <tt>switch</tt> déclaration de se terminer à ce point, ou de mettre fin prématurément à une <tt>with</tt> appel. Ci-dessous, vous pouvez voir quelques exemples d&#39;utilisation, et sa syntaxe est la suivante: <br><br><p class="code">break;<span class="notranslate"></span></p><br><p> &quot;pause&quot; dans un <tt>for</tt> boucle: <br><br></p><p class="code">{<br>
var i;<br>
for (i = 0; i &lt; 10; i += 1)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;if array[i] = 234 break;<br>
&nbsp;&nbsp;&nbsp;}<br>
num = i;<br>
}<br><span class="notranslate"></span></p><br> &quot;pause&quot; dans un <tt>repeat</tt> boucle: <br><br><p class="code">{<br>
var i, temp;<br>
i = 0;<br>
temp = 0;<br>
repeat (10)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;temp += array[i];<br>
&nbsp;&nbsp;&nbsp;if temp &gt; max_total break else i += 1;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> &quot;pause&quot; dans un <tt>while</tt> boucle: <br><br><p class="code">{<br>
var i;<br>
i = 0;<br>
while (!place_free(x, y))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x = random(room_width);<br>
&nbsp;&nbsp;&nbsp;y = random(room_height);<br>
&nbsp;&nbsp;&nbsp;if i &gt; 50 break else i+=1;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> &quot;pause&quot; lors de l&#39;utilisation <tt>with</tt>: <br><br><p class="code">{<br>
var count = 0;<br>
with (obj_Enemy)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;count++;<br>
&nbsp;&nbsp;&nbsp;if count &gt; 10 break;<br>
&nbsp;&nbsp;&nbsp;hp = 100;<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p></div><br> <label class="collapse" for="eight"><span class=
"notranslate">continue</span></label> <input id="eight" type=
"checkbox"> <div class="index_list"> le <tt>"continue"</tt> déclaration a la forme: <br><br><p class="code">continue<span class="notranslate"></span></p><br> Si utilisé dans une instruction qui forme une boucle ( <tt>repeat</tt>, <tt>while</tt>, <tt>do... until</tt> ou <tt>for</tt> ), il reviendra immédiatement au début de la boucle comme si la boucle avait été parcourue et rebouclée. Il en sera de même lorsque vous utiliserez le <tt>with</tt> function, où le code passera à l&#39;instance suivante et sera exécuté à nouveau, mais s&#39;il est utilisé en dehors du contexte, il générera une erreur. <br><br> Vous trouverez ci-dessous un exemple de son utilisation dans une boucle &quot;pour&quot;: <br><br><p class="code">{<br>
var i;<br>
for (i = 0; i &lt; 10; i += 1)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;if array[i] = "" continue;<br>
&nbsp;&nbsp;&nbsp;array[i] = "";<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Le code ci-dessus reviendra au début de la boucle si la valeur du tableau [i] est déjà une chaîne vide. </div><br> <label class="collapse" for="eleven"><span class=
"notranslate">exit</span></label> <input id="eleven" type=
"checkbox"> <div class="index_list"> le <tt>"exit"</tt> déclaration a la forme: <br><br><p class="code">exit;<span class="notranslate"></span></p><br> &quot;Exit&quot; termine simplement l&#39;exécution du script ou de l&#39;événement en cours. Notez qu’il ya une légère différence d’utilisation ici en fonction de la portée: si vous utilisez <tt>exit</tt> dans un script, il suffit de quitter le script et de revenir au code qui l&#39;a appelé. Toutefois, si vous utilisez cet événement dans un bloc de code depuis un objet, il quitte l&#39; <i>événement dans son intégralité</i> même s&#39;il existe plusieurs blocs de code distincts après la fin de la procédure. la fonction a été appelée. Il est généralement utilisé pour éviter qu&#39;une instance n&#39;exécute un bloc de code spécifique, par exemple un événement de collision. Le code ci-dessous en donne un exemple simple: <br><br><p class="code">{<br>
if !visible exit;<br>
while (place_meeting(x, y))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x -= lengthdir_x(1, direction - 180);<br>
&nbsp;&nbsp;&nbsp;y -= lengthdir_y(1, direction - 180);<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Le code ci-dessus vérifie une variable et, si elle est vraie, le bloc de code existe, sinon il continue et exécute le reste du code. <div class="note"> <b>Remarque:</b> cela ne met pas fin à l&#39;exécution du jeu. Pour cela, vous devez utiliser la fonction <a href=
"../4_gml_reference/game/game_end.html"><tt>game_end</tt></a>. </div></div><br> <label class="collapse" for="nine"><span class=
"notranslate">with</span></label> <input id="nine" type="checkbox"> <div class="index_list"> Comme indiqué dans la section <a hreff=
"7_Addressing_Variables.html">Adressage de variables dans d&#39;autres instances</a>, il est possible de lire et de modifier la valeur des variables dans d&#39;autres instances. Mais dans un certain nombre de cas, vous voulez faire beaucoup plus que de changer une seule variable avec ces autres instances. Par exemple, imaginons que vous souhaitiez déplacer tous les objets balle de votre jeu de 8 pixels. Vous pouvez penser que ceci est réalisé simplement par le code suivant: <br><br><p class="code">obj_ball.y = obj_ball.y + 8;<span class="notranslate"></span></p><br> Mais ceci n’est pas correct, car le côté droit de l’affectation obtient la valeur de l’ordonnée y de la première balle et ajoute 8 à celle-ci. Ensuite, cette nouvelle valeur est définie comme coordonnée y de toutes les boules. Ainsi, toutes les boules reçoivent la même coordonnée y, et même si vous utilisez les éléments suivants: <br><br><p class="code">obj_ball.y += 8;<span class="notranslate"></span></p><br> cela aura exactement le même effet car il s’agit simplement d’une abréviation de la première déclaration. Alors, comment pouvons <i>-</i> nous y parvenir? Pour cela, il existe la <b><tt>with</tt></b> déclaration en GML. Sa forme globale est: <br><br><p class="code">with (&lt;expression&gt;) &lt;statement&gt;<span class="notranslate"></span></p><br> &lt;Expression&gt; indique une ou plusieurs instances et vous pouvez utiliser pour cela un identifiant d&#39;instance, le nom d&#39;un objet (qui indique que <i>toutes les occurrences</i> de cet objet doivent exécuter le bloc de code) ou l&#39;un des <i>mots clés</i> spéciaux ( <b><tt>all</tt></b>, <b><tt>self</tt></b>, <b><tt>other</tt></b> ). &lt;Statement&gt; est maintenant exécuté pour chacune des instances indiquées, comme si cette instance était l&#39;instance actuelle (self). Ainsi, pour déplacer toutes les occurrences de l&#39;objet balle de 8 pixels vers le bas, vous pouvez taper: <br><br><p class="code">with (obj_ball) y += 8;<span class="notranslate"></span></p><br> Si vous souhaitez exécuter plusieurs instructions, entourez-les de la même manière que tout autre programme. Ainsi, par exemple, pour déplacer toutes les balles dans une position aléatoire, vous pouvez utiliser: <br><br><p class="code">with (obj_ball)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;x = random(room_width);<br>
&nbsp;&nbsp;&nbsp;y = random(room_height);<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> Notez que, dans la ou les instructions, l’instance indiquée est devenue l’instance cible (self) qui exécute le bloc de code, ce qui signifie que les instructions sont l’instance d’origine (qui contient <tt>"with"</tt> et le bloc de code) est devenu le <b><tt>other</tt></b> exemple. Ainsi, par exemple, pour déplacer toutes les billes à la position de l&#39;instance actuelle, vous pouvez taper ceci: <br><br><p class="code">with (obj_ball) { x = other.x; y = other.y; }<span class="notranslate"></span></p><br> La déclaration with est un outil extrêmement puissant et utile dans de très nombreuses circonstances. Il est donc important que vous compreniez parfaitement comment l’utiliser. Pour vous aider, voici quelques exemples d&#39;utilisation supplémentaires: <br><br><p class="code">with (instance_create_layer(x, y, "Instances",
obj_Ball))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;speed = other.speed;<br>
&nbsp;&nbsp;&nbsp;direction = other.direction;<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> Le code ci-dessus créera une instance d&#39;obj_Ball et lui assignera la vitesse et la direction de l&#39;instance qui exécute le bloc de code complet. <br><br><p class="code">with (instance_nearest(x, y, obj_Ball))<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;instance_destroy();<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p><br> Le code ci-dessus détruira l&#39;instance d&#39;obj_Ball la plus proche de l&#39;instance qui exécute le code. <br><br><p class="code">var inst;<br>
inst = noone;<br>
with (obj_ball)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;if str &gt; other.str inst = id;<br>
&nbsp;&nbsp;&nbsp;}<br>
if inst != noone target = inst;<br><span class="notranslate"></span></p><br> Le code ci-dessus est légèrement plus complexe que les précédents car il utilise une variable locale. Cette variable est locale au <i>script</i> et non à l&#39;instance. Elle peut donc être utilisée et accessible par toutes les instances référencées dans le bloc de code. Donc, dans le code, nous avons défini le <i>mot clé</i> spécial <tt><b>noone</b></tt> tt&gt; puis utilisez la construction &quot;with&quot; pour que chaque instance d&#39;obj_Ball vérifie sa variable <span class=
"notranslate">&quot;str&quot;</span> rapport à celle de l&#39;instance qui exécute le bloc de code. Si la valeur de la variable est plus grande, ils stockent leur identifiant unique dans la variable locale &quot;inst&quot;, ce qui signifie qu&#39;à la fin du code, seule l&#39;instance avec une valeur supérieure à l&#39;instance appelante (ou le <i>mot clé</i> <b><tt>noone</tt></b> si aucun n&#39;est plus grand) sera stocké dans la variable locale inst. Pour plus d&#39;informations sur les variables locales, reportez-vous à la section <a href="6_scope.html">Variables et variable</a>. </div><br> <label class="collapse" for="ten"><span class=
"notranslate">return</span></label> <input id="ten" type=
"checkbox"> <div class="index_list"> le <tt>"return"</tt> déclaration a la forme: <br><br><p class="code">return (&lt;expression&gt;)<br><span class="notranslate"></span></p><br> Vous utilisez seulement le <tt>return</tt> Cette instruction est utilisée dans les <a href=
"../../2_interface/1_editors/scripts.html">scripts</a> et est utilisée pour renvoyer une valeur du script à utiliser dans d&#39;autres appels de code ou de script. Il convient de noter que l&#39; <i>exécution du script se termine à l&#39;instruction return</i>, ce qui signifie que tout code venant après l&#39;appel du retour ne sera pas exécuté. Voici un exemple de script appelé &quot; <tt>scr_sqr</tt> &quot;qui calcule le carré de la valeur qui lui est transmise, et inclut la capture d&#39;erreur dans le cas où l&#39;argument qui le transmet n&#39;est pas un nombre réel: <br><br><p class="code">{<br>
if !is_real(argument0)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;return 0;<br>
&nbsp;&nbsp;&nbsp;}<br>
else<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;return (argument0 * argument0);<br>
&nbsp;&nbsp;&nbsp;}<br>
}<br><span class="notranslate"></span></p><br> Pour appeler un script à partir d&#39;un élément de code, il vous suffit d&#39;agir de la même manière que lorsque vous appelez des fonctions: écrivez le nom du script avec les valeurs d&#39;argument entre parenthèses. Donc, le script ci-dessus serait appelé comme ceci: <br><br><p class="code">if keyboard_check_pressed(vk_enter)<br>
&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;val = scr_sqr(amount);<br>
&nbsp;&nbsp;&nbsp;}<br><span class="notranslate"></span></p></div><br></blockquote><p><br></p></div><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="index.html">Aperçu GML</a> </div><div style="float:right"> Next: <a href="1_code.html">Structure du code de base</a> </div></div></div><h5>© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
