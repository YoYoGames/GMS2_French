<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>vertex_format_add_custom</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href=
"../../../../../../../files/helpindex.css" type="text/css">
<link rel="stylesheet" href="../../../../../../../default.css"
type="text/css">

<script type="text/JavaScript" src="../../../../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "_build/3_scripting/4_gml_reference/drawing/primitives/vertex formats/vertex_format_add_custom.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fprimitives%2Fvertex%20formats%2Fvertex_format_add_custom.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../../../../index.html?page=source%2F_build%2F3_scripting%2F4_gml_reference%2Fdrawing%2Fprimitives%2Fvertex%20formats%2Fvertex_format_add_custom.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! --><script type="text/JavaScript">
 if( typeof(chmtop.helpStyle) != 'undefined' ) { var linkNodes = document.getElementsByTagName("link");  for( var i=0; i < linkNodes.length; ++i ) { var link = linkNodes[i];    if( link.href.endsWith("default.css")) {    var style = link.href.replace("default.css", chmtop.helpStyle); document.write('<link id="newstyleLink" rel="stylesheet" href=' + style + ' type="text/css">');    break; } } } 
</script><h2> vertex_format_add_custom </h2><div class="body-scroll"><p><br></p><h3> Syntaxe: </h3><p class="code">vertex_format_add_custom(type, usage);<span class="notranslate"></span></p><p><br></p><div><table><tr><th> Argument </th><th> La description </th></tr><tr><td> <span class="notranslate">type</span> </td> <td> Type de données que ces données de sommet personnalisées contiendront (voir les <b><i>constantes de type</i></b> répertoriées ci-dessous). </td></tr><tr class="alt"><td> <span class="notranslate">usage</span> </td> <td> Utilisation des données (voir les <b><i>constantes d’utilisation</i></b> répertoriées ci-dessous). </td></tr></table></div><p><br></p><h3> Résultats: </h3><p class="code">N/A<span class="notranslate"></span></p><p><br></p><h3> La description </h3><blockquote><p> Cette fonction vous permet d&#39;utiliser un type de données personnalisé pour des attributs de format de sommet spécifiques dans le nouveau format de sommet en cours de création. Les valeurs disponibles à utiliser sont définies par la constante de type de données que vous choisissez, répertoriée ci-dessous: </p><p><br></p><div class="compat"><table><tr><th> Constant </th><th> La description </th></tr><tr><td> <span class="notranslate">vertex_type_float1</span> </td> <td> Une seule valeur en virgule flottante </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_float2</span> </td> <td> Deux valeurs en virgule flottante </td></tr><tr><td> <span class="notranslate">vertex_type_float3</span> </td> <td> Trois valeurs en virgule flottante </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_float4</span> </td> <td> Quatre valeurs en virgule flottante </td></tr><tr><td> <span class="notranslate">vertex_type_colour</span> </td> <td> Quatre valeurs composantes (r, g, b, a) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_type_ubyte4</span> </td> <td> Quatre composantes en octets non signés (de 0 à 255) </td></tr></table></div><p><br> L&#39;utilisation de ces constantes doit également être définie afin que les valeurs puissent être &quot;liées&quot; correctement dans le shader en cours de création. Cela est nécessaire car DX et OpenGL ont des exigences différentes. Par conséquent, si vous ne les liez pas correctement, ils ne seront pas pris en compte dans le shader. Les constantes d&#39;utilisation disponibles que vous pouvez choisir sont répertoriées ci-dessous et celles que vous utilisez dépendent des caractéristiques du shader en cours de création: </p><p><br></p><div class="compat"><table><tr><th> Constant </th><th> La description </th></tr><tr><td> <span class="notranslate">vertex_usage_position</span> </td> <td> valeurs de position (x, y, z) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_colour</span> </td> <td> valeurs de couleur (r, g, b, a) </td></tr><tr><td> <span class="notranslate">vertex_usage_normal</span> </td> <td> valeurs normales du sommet (nx, ny, nz) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_textcoord</span> </td> <td> Coordonnées UV (u, v) </td></tr><tr><td> <span class="notranslate">vertex_usage_blendweight</span> </td> <td> le mélange de la matrice d&#39;entrée (pour l&#39;animation squelettique, par exemple) </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_blendindices</span> </td> <td> les index des matrices à utiliser (pour l&#39;animation squelettique, par exemple) </td></tr><tr><td> <span class="notranslate">vertex_usage_depth</span> </td> <td> valeur de tampon de profondeur de sommet </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_tangent</span> </td> <td> valeurs tangentes </td></tr><tr><td> <span class="notranslate">vertex_usage_binormal</span> </td> <td> valeurs binormales </td></tr><tr class="alt"><td> <span class="notranslate">vertex_usage_fog</span> </td> <td> valeurs de brouillard </td></tr><tr><td> <span class="notranslate">vertex_usage_sample</span> </td> <td> index de l&#39;échantillonneur </td></tr></table></div><p><br> Il y a quelques points importants à noter lors de l&#39;utilisation de formats personnalisés tels que ceux-ci: </p><ul><li> le <tt>vertex_format_add_custom()</tt> la fonction ne supporte que <tt>vertex_usage_position</tt>, <tt>vertex_usage_colour</tt>, <tt>vertex_usage_normal</tt> et <tt>vertex_usage_textcoord</tt> lors de l&#39;utilisation de shaders GLSL. Ceux-ci mapperont les attributs du shader <tt>in_Position</tt>, <tt>in_Colour[0 - ...]</tt>, <tt>in_Normal</tt> respectivement (tout ce qui n&#39;est pas l&#39;un de ces trois attributs - par exemple: les coordonnées de texture - peut être mappé sur n&#39;importe quel attribut que vous définissez). </li><li style="list-style: none"><br></li><li> En général, vous devriez utiliser <tt>vertex_usage_textcoord</tt> pour tous les paramètres supplémentaires si possible, comme des types comme <tt>vertex_usage_blendweight</tt> et <tt>vertex_usage_tangent</tt> sont presque obsolètes dans la plupart des langages de shader et ne seront probablement pas convertis correctement. Utilisez plutôt <tt>vec</tt>, <tt>vec2</tt>, <tt>vec3</tt> ou <tt>vec4</tt> les types <tt>vertex_usage_textcoord</tt> et tout devrait bien fonctionner. </li><li style="list-style: none"><br></li><li> GLSL ES ne prend <i>pas en</i> charge les attributs d’entier. <tt>ivec4</tt> ne fonctionne pas (ce type est généralement utilisé lors du passage <tt>vertex_usage_blendindices</tt> ). Ce que vous devez faire est de passer en coordonnées de texture, puis dans le shader, de les convertir en <tt>ivec4</tt> comme ça: <p class="code">attribute vec3 in_Position;<br>
attribute vec4 in_BlendIndices;<br>
attribute vec4 in_BlendWeights;<br>
<br>
varying vec4 v_vColour;<br>
varying mat4 v_mat;<br>
<br>
void main()<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;gl_Position =
gm_Matrices[MATRIX_WORLD_VIEW_PROJECTION] * vec4( in_Position.xyz,
1.0);<br>
&nbsp;&nbsp;&nbsp;&nbsp;v_vColour = in_BlendWeights;<br>
&nbsp;&nbsp;&nbsp;&nbsp; ivec4 t = ivec4(in_BlendIndices);<br>
&nbsp;&nbsp;&nbsp;&nbsp; v_mat = gm_Matrices[ t.x ];<br>
}<br><span class="notranslate"></span></p><br> Les poids de fusion sont généralement stockés dans un tableau, puis consultés à l&#39;aide d&#39;indices de fusion, mais vous pouvez voir ici que, au lieu de définir <tt>in_BlendIndices</tt> en tant que <tt>ivec4</tt> attribut, c&#39;est un <tt>vec4</tt>, puis jette un <tt>ivec4</tt> dans le code. Ceci est ensuite utilisé pour indexer le tableau créé en utilisant le <tt>gm_Matrix</tt> (vous ne pouvez accéder à un tableau en utilisant un <tt>INT</tt> valeur - pas un float). </li><li style="list-style: none"><br></li></ul></blockquote><p><br></p><h3> Exemple: </h3><p class="code">vertex_format_begin();<br>
vertex_format_add_textcoord();<br>
vertex_format_add_custom(vertex_type_float3,
vertex_usage_position);<br>
my_format = vertex_format_end();<br><span class="notranslate"></span></p><blockquote><p> Le code ci-dessus créera un nouveau format de sommet avec uniquement une texture et 3 valeurs de virgule flottante personnalisées pour la position. Il est ensuite stocke l&#39;ID de format dans la variable &quot;my_format&quot;. </p></blockquote><p><br></p></div><div class="footer"><div class="buttons"><div class="clear"><div style="float:left"> Retour: <a href="index.html">Formats de vertex</a> </div><div style="float:right"> Suivant: <a href=
"vertex_format_end.html">vertex_format_end</a> </div></div></div><h5>© Copyright YoYo Games Ltd. 2018 All Rights Reserved</h5>
<script type="text/javascript">
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');   ga('create', 'UA-2711665-14', 'auto');   ga('send', 'pageview'); 
</script>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
